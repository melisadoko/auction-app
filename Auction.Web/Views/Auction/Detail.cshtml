@model AuctionDetailsViewModel

@{
    ViewData["Title"] = "Auction Details";
    var timeRemaining = Model.Auction.EndDate - DateTime.Now;
}

<div class="container">
    <div class="row mb-4">
        <div class="col-md-6">
            <h3 class="h5">@Model.Auction.Title</h3>
        </div>
        <div class="col-md-6 text-end">
            <h6>Seller: @Model.Auction.CreatedUser</h6>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-12">
            <h6>Remaining Time: @($"{timeRemaining.Days}d {timeRemaining.Hours}h {timeRemaining.Minutes}m")</h6>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-12">
            <h6>Description</h6>
            <p>@Model.Auction.Description</p>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6">
            <h6>Current Highest Bid: @Model.Auction.CurrentPrice</h6>
        </div>
        <div class="col-md-6">
            @if (!string.IsNullOrEmpty(Model.Auction.HighestBidder))
            {
                <h6>Highest Bidder: @Model.Auction.HighestBidder</h6>
            }
            else
            {
                <h6>No bids placed yet.</h6>
            }
        </div>
    </div>
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <div class="row mb-4">
        <div class="col-md-12 text-end">
            <h6 class="mt-4">Place a New Bid</h6>
            <form asp-action="PlaceBid" method="post" class="d-inline">
                <input type="hidden" asp-for="Auction.Id" />
                <input type="hidden" asp-for="Auction.EndDate" />
                <input type="hidden" asp-for="Auction.CurrentPrice" />
                <input type="hidden" asp-for="Auction.StartingPrice" />
                <input type="hidden" asp-for="Auction.HighestBidder" />
                <input type="hidden" asp-for="Auction.Description" />
                <input type="hidden" asp-for="Auction.Title" />
                <input type="hidden" asp-for="Auction.CreatedUser" />
                <input type="hidden" asp-for="Bid.AuctionId" />
                <div class="input-group justify-content-end">
                    <input asp-for="Bid.Amount" class="form-control" type="number" step="0.01" placeholder="Enter your bid" required style="max-width: 120px;" />
                    <button type="submit" class="btn btn-outline-success">Bid</button>
                </div>
                <span asp-validation-for="Bid.Amount" class="text-danger"></span>
            </form>
        </div>
    </div>
</div>
